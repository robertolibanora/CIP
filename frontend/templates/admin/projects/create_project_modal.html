<!-- Modal Nuovo Progetto -->
<div id="create-project-modal" class="admin-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; background: rgba(0,0,0,0.6); backdrop-filter: blur(4px); align-items: center; justify-content: center;">
    <div class="admin-modal-backdrop" onclick="closeModal('create-project-modal')" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div>
    <div class="admin-modal-container" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; width: 90%; max-width: 700px; max-height: 85vh; border-radius: 12px; box-shadow: 0 25px 50px rgba(0,0,0,0.25); overflow: hidden; display: flex; flex-direction: column; margin: 0;">
        <div class="admin-modal-header" style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 24px 32px; display: flex; justify-content: space-between; align-items: center;">
            <div style="display: flex; align-items: center; gap: 12px;">
                <div style="width: 40px; height: 40px; background: rgba(255,255,255,0.2); border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                    <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                    </svg>
                </div>
                <div>
                    <h3 style="margin: 0; font-size: 1.5rem; font-weight: 700; color: white;">Nuovo Progetto</h3>
                    <p style="margin: 4px 0 0 0; font-size: 0.875rem; color: rgba(255,255,255,0.8);">Crea un nuovo progetto immobiliare</p>
                </div>
            </div>
            <button type="button" onclick="closeModal('create-project-modal')" style="background: rgba(255,255,255,0.1); border: none; width: 40px; height: 40px; border-radius: 8px; cursor: pointer; color: white; display: flex; align-items: center; justify-content: center; transition: background-color 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.2)'" onmouseout="this.style.background='rgba(255,255,255,0.1)'">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        
        <div class="admin-modal-body" style="flex: 1; overflow-y: auto; padding: 32px;">
            <form id="create-project-form" enctype="multipart/form-data" style="display: flex; flex-direction: column; gap: 24px;">
                <!-- Informazioni Base -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div style="display: flex; flex-direction: column;">
                        <label style="margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 0.875rem;">Codice Progetto <span style="color: #ef4444;">*</span></label>
                        <input type="text" name="code" required 
                               placeholder="es. PRJ001" maxlength="20" 
                               style="padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.2s; background: #fafafa;" 
                               onfocus="this.style.borderColor='#3b82f6'; this.style.background='white'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)'" 
                               onblur="this.style.borderColor='#e5e7eb'; this.style.background='#fafafa'; this.style.boxShadow='none'">
                    </div>
                    <div style="display: flex; flex-direction: column;">
                        <label style="margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 0.875rem;">Nome Progetto <span style="color: #ef4444;">*</span></label>
                        <input type="text" name="title" required 
                               placeholder="es. Residenza Milano Centro" 
                               style="padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.2s; background: #fafafa;" 
                               onfocus="this.style.borderColor='#3b82f6'; this.style.background='white'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)'" 
                               onblur="this.style.borderColor='#e5e7eb'; this.style.background='#fafafa'; this.style.boxShadow='none'">
                    </div>
                </div>
                
                <div style="display: flex; flex-direction: column;">
                    <label style="margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 0.875rem;">Descrizione <span style="color: #ef4444;">*</span></label>
                    <textarea name="description" rows="3" required 
                              placeholder="Descrizione dettagliata del progetto..." 
                              style="padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.2s; background: #fafafa; resize: vertical; min-height: 80px;" 
                              onfocus="this.style.borderColor='#3b82f6'; this.style.background='white'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)'" 
                              onblur="this.style.borderColor='#e5e7eb'; this.style.background='#fafafa'; this.style.boxShadow='none'"></textarea>
                </div>
                
                <!-- Informazioni Finanziarie -->
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                    <div style="display: flex; flex-direction: column;">
                        <label style="margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 0.875rem;">Importo Target (€) <span style="color: #ef4444;">*</span></label>
                        <input type="number" name="target_amount" required 
                               min="1000" step="100" placeholder="100000" 
                               style="padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.2s; background: #fafafa;" 
                               onfocus="this.style.borderColor='#3b82f6'; this.style.background='white'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)'" 
                               onblur="this.style.borderColor='#e5e7eb'; this.style.background='#fafafa'; this.style.boxShadow='none'">
                    </div>
                    <div style="display: flex; flex-direction: column;">
                        <label style="margin-bottom: 8px; font-weight: 600; color: #374151; font-size: 0.875rem;">Investimento Minimo (€)</label>
                        <input type="number" name="min_investment" 
                               min="100" step="50" placeholder="1000" value="1000" 
                               style="padding: 12px 16px; border: 2px solid #e5e7eb; border-radius: 8px; font-size: 14px; transition: all 0.2s; background: #fafafa;" 
                               onfocus="this.style.borderColor='#3b82f6'; this.style.background='white'; this.style.boxShadow='0 0 0 3px rgba(59, 130, 246, 0.1)'" 
                               onblur="this.style.borderColor='#e5e7eb'; this.style.background='#fafafa'; this.style.boxShadow='none'">
                    </div>
                </div>
                
                <!-- Informazioni Immobile -->
                <div class="admin-grid admin-grid--2">
                    <div class="admin-form-group">
                        <label class="admin-label">Indirizzo (obbligatorio)</label>
                        <input type="text" name="address" class="admin-input" required
                               placeholder="es. Milano, Via Roma 123">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-label">Tipo Immobile</label>
                        <select name="type" class="admin-select">
                            <option value="residential">Residenziale</option>
                            <option value="commercial">Commerciale</option>
                            <option value="mixed">Misto</option>
                        </select>
                    </div>
                </div>
                
                <!-- ROI e Durata -->
                <div class="admin-grid admin-grid--2">
                    <div class="admin-form-group">
                        <label class="admin-label">ROI Atteso (%)</label>
                        <input type="number" name="roi" class="admin-input" 
                               min="0" max="50" step="0.1" placeholder="8.5" value="8.0">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-label">Durata (mesi)</label>
                        <input type="number" name="duration" class="admin-input" 
                               min="1" max="60" placeholder="12" value="12">
                    </div>
                </div>
                
                <!-- Upload Foto/Documenti -->
                <div class="admin-form-group">
                    <label class="admin-label">Foto Progetto (obbligatorio)</label>
                    <input type="file" name="photo" class="admin-input" accept=".jpg,.jpeg,.png" required>
                    <p class="admin-text-small text-gray-500 mt-1">Formato JPG/PNG, max 5MB</p>
                </div>
                <div class="admin-form-group">
                    <label class="admin-label">Documenti Tecnici PDF (obbligatorio)</label>
                    <input type="file" name="documents" class="admin-input" accept=".pdf" required>
                    <p class="admin-text-small text-gray-500 mt-1">Formato PDF, max 10MB</p>
                </div>
                
                <!-- Date -->
                <div class="admin-grid admin-grid--2">
                    <div class="admin-form-group">
                        <label class="admin-label">Data Inizio</label>
                        <input type="date" name="start_date" class="admin-input">
                    </div>
                    <div class="admin-form-group">
                        <label class="admin-label">Data Fine</label>
                        <input type="date" name="end_date" class="admin-input">
                    </div>
                </div>
            </form>
        </div>
        
        <div style="background: #f8fafc; padding: 24px 32px; border-top: 1px solid #e5e7eb; display: flex; justify-content: flex-end; gap: 12px;">
            <button type="button" onclick="closeModal('create-project-modal')" 
                    style="background: white; color: #6b7280; padding: 12px 24px; border: 2px solid #e5e7eb; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; transition: all 0.2s;" 
                    onmouseover="this.style.borderColor='#d1d5db'; this.style.color='#374151'" 
                    onmouseout="this.style.borderColor='#e5e7eb'; this.style.color='#6b7280'">
                Annulla
            </button>
            <button type="button" onclick="submitCreateProject()" id="create-project-submit-btn" 
                    style="background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%); color: white; padding: 12px 24px; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; font-size: 14px; transition: all 0.2s; box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);" 
                    onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 6px 16px rgba(59, 130, 246, 0.4)'" 
                    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 12px rgba(59, 130, 246, 0.3)'">
                <span style="margin-right: 8px;">+</span>
                Crea Progetto
            </button>
        </div>
    </div>
</div>
