{% set ep = request.endpoint or '' %}
<nav class="tabbar" role="navigation" aria-label="Navigazione principale">
  <!-- Home -->
  <a href="{{ url_for('user.dashboard') }}"
     class="tabbar-item {{ 'active' if ep == 'user.dashboard' else '' }}"
     aria-label="Dashboard"
     aria-current="{{ 'page' if ep == 'user.dashboard' else 'false' }}">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
      <polyline points="9,22 9,12 15,12 15,22"></polyline>
    </svg>
  </a>

  <!-- Projects -->
  <a href="{{ url_for('user.projects') }}" 
     class="tabbar-item {{ 'active' if ep == 'user.projects' else '' }}"
     aria-label="Progetti"
     aria-current="{{ 'page' if ep == 'user.projects' else 'false' }}">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
    </svg>
  </a>

  <!-- Referral -->
  <a href="{{ url_for('user.referral') }}" 
     class="tabbar-item {{ 'active' if ep == 'user.referral' else '' }}"
     aria-label="Referral"
     aria-current="{{ 'page' if ep == 'user.referral' else 'false' }}">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
    </svg>
  </a>

  <!-- Portfolio -->
  <a href="{{ url_for('user.portfolio') }}" 
     class="tabbar-item {{ 'active' if ep == 'user.portfolio' else '' }}"
     aria-label="Portfolio"
     aria-current="{{ 'page' if ep == 'user.portfolio' else 'false' }}">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
      <path d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
    </svg>
  </a>

  <!-- Profile -->
  <a href="{{ url_for('user.profile') }}" 
     class="tabbar-item {{ 'active' if ep == 'user.profile' else '' }}"
     aria-label="Profilo"
     aria-current="{{ 'page' if ep == 'user.profile' else 'false' }}">
    {% if current_user and current_user.avatar_url %}
      <img src="{{ current_user.avatar_url }}" alt="" class="h-6 w-6 rounded-full object-cover" loading="lazy">
    {% else %}
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
        <circle cx="12" cy="7" r="4"></circle>
      </svg>
    {% endif %}
  </a>
</nav>

