{% extends "layouts/base.html" %}

{% block title %}Progetti - CIP Immobiliare{% endblock %}

{% block content %}
<div class="min-h-screen bg-gray-50">
    <!-- Header semplificato -->
    <div class="bg-white border-b border-gray-200 px-4 py-6">
        <h1 class="text-2xl font-bold text-gray-900">Progetti</h1>
        <p class="text-gray-600 mt-1">Scopri opportunità di investimento</p>
    </div>

    <!-- Lista progetti essenziale -->
    <div class="px-4 py-6">
        {% if projects %}
            <div class="space-y-4">
                {% for project in projects %}
                <div class="bg-white rounded-lg border p-4">
                    <div class="flex justify-between items-start mb-3">
                        <div>
                            <h3 class="font-medium text-gray-900">{{ project['title'] or 'Progetto' }}</h3>
                            <p class="text-sm text-gray-600">{{ project['location'] or 'Località' }}</p>
                        </div>
                        <div class="text-right">
                            <div class="text-lg font-bold text-blue-600">{{ "%.1f"|format(project['roi']|float) }}%</div>
                            <div class="text-xs text-gray-600">ROI</div>
                        </div>
                    </div>
                    
                    <div class="flex justify-between items-center">
                        <div class="text-sm text-gray-600">
                            Min: €{{ "%.0f"|format(project['min_investment']|float) }}
                        </div>
                        <button onclick="openInvestmentModal('{{ project['id'] }}')" class="bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                            Investi
                        </button>
                    </div>
                </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="bg-white p-8 rounded-lg border text-center">
                <p class="text-gray-600 mb-4">Nessun progetto disponibile</p>
            </div>
        {% endif %}
    </div>
</div>

<!-- Modal investimento semplificato -->
<div id="investmentModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
    <div class="bg-white rounded-lg max-w-sm w-full p-6">
        <h3 class="text-lg font-bold text-gray-900 mb-4">Investi</h3>
        <form>
            <div class="mb-4">
                <label class="block text-sm font-medium text-gray-700 mb-1">Importo</label>
                <input type="number" class="w-full p-3 border rounded-lg" placeholder="€1000">
            </div>
            <div class="flex space-x-3">
                <button type="button" onclick="closeInvestmentModal()" class="flex-1 bg-gray-100 text-gray-700 p-3 rounded-lg font-medium">
                    Annulla
                </button>
                <button type="submit" class="flex-1 bg-blue-600 text-white p-3 rounded-lg font-medium">
                    Conferma
                </button>
            </div>
        </form>
    </div>
</div>

<script>
function openInvestmentModal(projectId) {
    document.getElementById('investmentModal').classList.remove('hidden');
}

function closeInvestmentModal() {
    document.getElementById('investmentModal').classList.add('hidden');
}
</script>
{% endblock %}
